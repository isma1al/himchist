window.addEventListener("click",(e=>{let t,i;const r=document.querySelector(".price-check__total span");let n=0;const c=document.querySelector(".price-check__items"),s=()=>{c.querySelectorAll(".price-check__item").forEach((e=>{const t=e.querySelector(".total__price"),i=parseInt(t.innerHTML);n+=i,r.innerHTML=n+" руб."}))};if((e.target.classList.contains("item-dec__btn")||e.target.classList.contains("item-inc__btn"))&&(t=e.target.closest(".price-item__right-block").querySelector(".counter__span")),e.target.classList.contains("item-dec__btn")&&parseInt(t.innerHTML)>0){t.innerHTML=--t.innerHTML;const n=e.target.closest(".price-item"),a=e.target.closest(".price-item").getAttribute("data-id"),l=c.querySelector(`[data-id='${a}']`),o=n.querySelector(".item-price").innerHTML.slice(0,-1);l.querySelector(".price-check__item-text span").innerHTML=`(${t.innerHTML})`,i=l.querySelector(".total__price").innerHTML.slice(0,-4)-o,l.querySelector(".total__price").innerHTML=`${i} руб.`,0==t.innerHTML&&(c.removeChild(l),r.innerHTML="0 руб."),s()}if(e.target.classList.contains("item-inc__btn")){t.innerHTML=++t.innerHTML;const r=e.target.closest(".price-item"),n={id:r.getAttribute("data-id"),title:r.querySelector(".item-name").innerText,price:r.querySelector(".item-price").innerText.slice(0,-1)};i=n.price*t.innerHTML;const a=c.querySelector(`[data-id="${n.id}"]`),l=`\n        <div class="price-check__item" data-id=${n.id}>\n                        <p class="price-check__item-text">${n.title} <span>(${t.innerHTML})</span> </p>\n                        <span class="total__price">${i} руб.</span>\n                    </div>`;a?(a.querySelector(".total__price").innerHTML=`${i} руб.`,a.querySelector(".price-check__item-text span").innerHTML=`(${t.innerHTML})`):c.insertAdjacentHTML("beforeend",l),s()}}));